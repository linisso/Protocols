Сервер ловит пакеты, проверяет, есть ли у него нужные данные. 
Если нет, перекидывает пакет на нормальный днс и получает ответ, который возвращает клиенту. 
Если есть, то собирает всё, что нужно клиенту, из кэша и посылает клиенту.
 
Использование: python dns.py
P.S. В настройках текущей сети (в панели управления) следует вручную прописать предпочитаемый DNS-сервер (127.0.0.1).